<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Feature Extraction [WIP] · AutomotiveDrivingModels.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">AutomotiveDrivingModels.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../examples/straight_roadway/">Driving on a Straight Roadway</a></li><li><a class="tocitem" href="../examples/stadium/">Driving in a Stadium</a></li><li><a class="tocitem" href="../examples/intersection/">Intersection</a></li><li><a class="tocitem" href="../examples/crosswalk/">Crosswalk</a></li><li><a class="tocitem" href="../examples/sidewalk/">Sidewalk</a></li></ul></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../Roadways/">Roadways</a></li><li><a class="tocitem" href="../actions/">Driving Actions</a></li><li><a class="tocitem" href="../states/">States</a></li><li><a class="tocitem" href="../agent_definitions/">Agent Definition</a></li><li><a class="tocitem" href="../behaviors/">Behaviors</a></li><li><a class="tocitem" href="../simulation/">Simulation</a></li><li><a class="tocitem" href="../collision_checkers/">Collision Checker</a></li><li class="is-active"><a class="tocitem" href>Feature Extraction [WIP]</a><ul class="internal"><li><a class="tocitem" href="#Neighbors-Features-1"><span>Neighbors Features</span></a></li><li><a class="tocitem" href="#Lane-Features-1"><span>Lane Features</span></a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Feature Extraction [WIP]</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Feature Extraction [WIP]</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/sisl/AutomotiveDrivingModels.jl/blob/master/docs/src/feature_extraction.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Feature-Extraction-[WIP]-1"><a class="docs-heading-anchor" href="#Feature-Extraction-[WIP]-1">Feature Extraction [WIP]</a><a class="docs-heading-anchor-permalink" href="#Feature-Extraction-[WIP]-1" title="Permalink"></a></h1><p>AutomotiveDrivingModels.jl implements a feature extraction pipeline to extract information from pre-recorded simulation  in a <code>QueueRecord</code> or <code>ListRecord</code>. (see Records.jl for info on the data structure)</p><p>PRs for documenting feature extraction are more than welcome</p><h2 id="Neighbors-Features-1"><a class="docs-heading-anchor" href="#Neighbors-Features-1">Neighbors Features</a><a class="docs-heading-anchor-permalink" href="#Neighbors-Features-1" title="Permalink"></a></h2><p>Here is a list of function to retrieve information about the neighbors of a given vehicle. </p><article class="docstring"><header><a class="docstring-binding" id="AutomotiveDrivingModels.NeighborLongitudinalResult" href="#AutomotiveDrivingModels.NeighborLongitudinalResult"><code>AutomotiveDrivingModels.NeighborLongitudinalResult</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">NeighborLongitudinalResult</code></pre><p>A structure to retrieve information about a neihbor in the longitudinal direction i.e. rear and front neighbors on the same lane. If the neighbor index is equal to <code>nothing</code> it means there is no neighbor.</p><p><strong>Fields</strong></p><ul><li><code>ind::Union{Nothing, Int64}</code> index of the neighbor in the scene</li><li><code>Δs::Float64</code> positive distance along the lane between vehicles positions</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sisl/AutomotiveDrivingModels.jl/blob/d0ac8250c368950a825952e80ea17661a6ac8a45/src/feature-extraction/neighbors_features.jl#L1-L10">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="AutomotiveDrivingModels.get_neighbor_fore_along_lane" href="#AutomotiveDrivingModels.get_neighbor_fore_along_lane"><code>AutomotiveDrivingModels.get_neighbor_fore_along_lane</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">get_neighbor_fore_along_lane(scene::EntityFrame, vehicle_index::Int, roadway::Roadway; max_distance_fore::Float64 = 250.0) 
get_neighbor_fore_along_lane(scene::EntityFrame{S,D,I}, roadway::Roadway, tag_start::LaneTag, s_base::Float64, targetpoint_primary::VehicleTargetPoint, targetpoint_valid::VehicleTargetPoint;
                             max_distance_fore::Float64 = 250.0, index_to_ignore::Int=-1) where {S,D&lt;:AbstractAgentDefinition,I}

                             get_neighbor_fore_along_lane(scene::EntityFrame{S,D,I}, vehicle_index::Int, roadway::Roadway, targetpoint_ego::VehicleTargetPoint, targetpoint_primary::VehicleTargetPoint, # the reference point whose distance we want to minimize
targetpoint_valid::VehicleTargetPoint; # the reference point, which if distance to is positive, we include the vehicle
max_distance_fore::Float64 = 250.0 # max distance to search forward [m]
) where {S,D&lt;:AbstractAgentDefinition,I}</code></pre><p>Return the index and the longitudinal distance of the vehicle that is in the same lane as scene[vehicle<em>index] and in front of it with the smallest distance along the lane. The result is returned as a <code>NeighborLongitudinalResult</code> object. The method will search on the current lane first, and if no vehicle is found it will continue to travel along the lane following next</em>lane(lane, roadway). If no vehicle is found within <code>max_distance_fore,</code> the index takes a value of <code>nothing</code>.</p><p><strong>Notes on the optional arguments:</strong></p><ul><li><code>targetpoint_primary::VehicleTargetPoint</code> the reference point whose distance we want to minimize</li><li><code>targetpoint_valid::VehicleTargetPoint</code> the reference point, which if distance to is positive, we include the vehicle</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sisl/AutomotiveDrivingModels.jl/blob/d0ac8250c368950a825952e80ea17661a6ac8a45/src/feature-extraction/neighbors_features.jl#L26-L45">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="AutomotiveDrivingModels.get_neighbor_fore_along_left_lane" href="#AutomotiveDrivingModels.get_neighbor_fore_along_left_lane"><code>AutomotiveDrivingModels.get_neighbor_fore_along_left_lane</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">get_neighbor_fore_along_left_lane(scene::EntityFrame, vehicle_index::Int, roadway::Roadway; max_distance_fore::Float64 = 250.0 )
get_neighbor_fore_along_left_lane(
scene::EntityFrame{S,D,I},
vehicle_index::Int,
roadway::Roadway,
targetpoint_ego::VehicleTargetPoint,
targetpoint_primary::VehicleTargetPoint,
targetpoint_valid::VehicleTargetPoint;
max_distance_fore::Float64 = 250.0
) where {S,D&lt;:AbstractAgentDefinition,I}</code></pre><p>Returns the information about the front neighbor of a vehicle on its left lane. </p><p><strong>Arguments</strong></p><ul><li><code>scene</code> the scene containing all vehicles information </li><li><code>vehicle_index</code> the index of the vehicle in the scene for which we want to find the neighbor (ego vehicle)</li><li><code>roadway</code> the roadway layout </li><li><code>targetpoint_ego</code> a target point on the ego vehicle that will be used to calculate the distance </li><li><code>targetpoint_primary</code> the reference point whose distance we want to minimize</li><li><code>targetpoint_valid</code> the reference point, which if distance to is positive, we include the vehicle</li><li><code>max_distance_fore</code> max distance to search forward [m]</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sisl/AutomotiveDrivingModels.jl/blob/d0ac8250c368950a825952e80ea17661a6ac8a45/src/feature-extraction/neighbors_features.jl#L154-L177">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="AutomotiveDrivingModels.get_neighbor_fore_along_right_lane" href="#AutomotiveDrivingModels.get_neighbor_fore_along_right_lane"><code>AutomotiveDrivingModels.get_neighbor_fore_along_right_lane</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">get_neighbor_fore_along_right_lane(scene::EntityFrame, vehicle_index::Int, roadway::Roadway; max_distance_fore::Float64 = 250.0 )
get_neighbor_fore_along_right_lane(
scene::EntityFrame{S,D,I},
vehicle_index::Int,
roadway::Roadway,
targetpoint_ego::VehicleTargetPoint,
targetpoint_primary::VehicleTargetPoint,
targetpoint_valid::VehicleTargetPoint;
max_distance_fore::Float64 = 250.0
) where {S,D&lt;:AbstractAgentDefinition,I}</code></pre><p>Returns the information about the front neighbor of a vehicle on its right lane. </p><p><strong>Arguments</strong></p><ul><li><code>scene</code> the scene containing all vehicles information </li><li><code>vehicle_index</code> the index of the vehicle in the scene for which we want to find the neighbor (ego vehicle)</li><li><code>roadway</code> the roadway layout </li><li><code>targetpoint_ego</code> a target point on the ego vehicle that will be used to calculate the distance </li><li><code>targetpoint_primary</code> the reference point whose distance we want to minimize</li><li><code>targetpoint_valid</code> the reference point, which if distance to is positive, we include the vehicle</li><li><code>max_distance_fore</code> max distance to search forward [m]</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sisl/AutomotiveDrivingModels.jl/blob/d0ac8250c368950a825952e80ea17661a6ac8a45/src/feature-extraction/neighbors_features.jl#L215-L238">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="AutomotiveDrivingModels.get_neighbor_rear_along_lane" href="#AutomotiveDrivingModels.get_neighbor_rear_along_lane"><code>AutomotiveDrivingModels.get_neighbor_rear_along_lane</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">get_neighbor_fore_along_rear_lane(scene::EntityFrame, vehicle_index::Int, roadway::Roadway; max_distance_fore::Float64 = 250.0 )
get_neighbor_fore_along_rear_lane(
scene::EntityFrame{S,D,I},
vehicle_index::Int,
roadway::Roadway,
targetpoint_ego::VehicleTargetPoint,
targetpoint_primary::VehicleTargetPoint,
targetpoint_valid::VehicleTargetPoint;
max_distance_fore::Float64 = 250.0
) where {S,D&lt;:AbstractAgentDefinition,I}</code></pre><p>Returns the information about the rear neighbor of a vehicle on its own lane. </p><p><strong>Arguments</strong></p><ul><li><code>scene</code> the scene containing all vehicles information </li><li><code>vehicle_index</code> the index of the vehicle in the scene for which we want to find the neighbor (ego vehicle)</li><li><code>roadway</code> the roadway layout </li><li><code>targetpoint_ego</code> a target point on the ego vehicle that will be used to calculate the distance </li><li><code>targetpoint_primary</code> the reference point whose distance we want to minimize</li><li><code>targetpoint_valid</code> the reference point, which if distance to is positive, we include the vehicle</li><li><code>max_distance_fore</code> max distance to search forward [m]</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sisl/AutomotiveDrivingModels.jl/blob/d0ac8250c368950a825952e80ea17661a6ac8a45/src/feature-extraction/neighbors_features.jl#L276-L299">source</a></section></article><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>get_neighbor_rear_along_left_lane</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>get_neighbor_rear_along_right_lane</code>. Check Documenter&#39;s build log for details.</p></div></div><article class="docstring"><header><a class="docstring-binding" id="AutomotiveDrivingModels.FrenetRelativePosition" href="#AutomotiveDrivingModels.FrenetRelativePosition"><code>AutomotiveDrivingModels.FrenetRelativePosition</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">FrenetRelativePosition</code></pre><p>Contains information about the projection of a point on a lane. See <code>get_frenet_relative_position</code>.</p><p><strong>Fields</strong></p><ul><li><code>origin::RoadIndex</code> original roadindex used for the projection, contains the target lane ID.</li><li><code>target::RoadIndex</code> roadindex reached after projection</li><li><code>Δs::Float64</code> longitudinal distance to the original roadindex </li><li><code>t::Float64</code> lateral distance to the original roadindex in the frame of the target lane</li><li><code>ϕ::Float64</code> angle with the original roadindex in the frame of the target lane</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sisl/AutomotiveDrivingModels.jl/blob/d0ac8250c368950a825952e80ea17661a6ac8a45/src/feature-extraction/neighbors_features.jl#L499-L510">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="AutomotiveDrivingModels.get_frenet_relative_position" href="#AutomotiveDrivingModels.get_frenet_relative_position"><code>AutomotiveDrivingModels.get_frenet_relative_position</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">get_frenet_relative_position(posG::VecSE2{Float64}, roadind::RoadIndex, roadway::Roadway;
    max_distance_fore::Float64 = 250.0, # max distance to search forward [m]
    max_distance_rear::Float64 = 250.0, # max distance to search backward [m]
    improvement_threshold::Float64 = 1e-4,
)</code></pre><p>Project the given point to the same lane as the given RoadIndex. This will return the projection of the point, along with the Δs along the lane from the RoadIndex. The returned type is a <code>FrenetRelativePosition</code> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sisl/AutomotiveDrivingModels.jl/blob/d0ac8250c368950a825952e80ea17661a6ac8a45/src/feature-extraction/neighbors_features.jl#L519-L529">source</a></section></article><h2 id="Lane-Features-1"><a class="docs-heading-anchor" href="#Lane-Features-1">Lane Features</a><a class="docs-heading-anchor-permalink" href="#Lane-Features-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="AutomotiveDrivingModels.get_lane_width" href="#AutomotiveDrivingModels.get_lane_width"><code>AutomotiveDrivingModels.get_lane_width</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">get_lane_width(veh::Entity, roadway::Roadway)</code></pre><p>Returns the width of the lane where <code>veh</code> is.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sisl/AutomotiveDrivingModels.jl/blob/d0ac8250c368950a825952e80ea17661a6ac8a45/src/feature-extraction/lane_features.jl#L1-L4">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="AutomotiveDrivingModels.get_markerdist_left" href="#AutomotiveDrivingModels.get_markerdist_left"><code>AutomotiveDrivingModels.get_markerdist_left</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">get_markerdist_left(veh::Entity, roadway::Roadway)</code></pre><p>distance of <code>veh</code> to the left marker of the lane</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sisl/AutomotiveDrivingModels.jl/blob/d0ac8250c368950a825952e80ea17661a6ac8a45/src/feature-extraction/lane_features.jl#L18-L21">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="AutomotiveDrivingModels.get_markerdist_right" href="#AutomotiveDrivingModels.get_markerdist_right"><code>AutomotiveDrivingModels.get_markerdist_right</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">get_markerdist_left(veh::Entity, roadway::Roadway)</code></pre><p>distance of <code>veh</code> to the right marker of the lane</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sisl/AutomotiveDrivingModels.jl/blob/d0ac8250c368950a825952e80ea17661a6ac8a45/src/feature-extraction/lane_features.jl#L28-L31">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../collision_checkers/">« Collision Checker</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 9 March 2020 03:08">Monday 9 March 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
