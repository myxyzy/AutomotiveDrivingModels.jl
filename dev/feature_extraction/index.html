<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Feature Extraction · AutomotiveDrivingModels.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">AutomotiveDrivingModels.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../examples/straight_roadway/">Driving on a Straight Roadway</a></li><li><a class="tocitem" href="../examples/stadium/">Driving in a Stadium</a></li><li><a class="tocitem" href="../examples/intersection/">Intersection</a></li><li><a class="tocitem" href="../examples/crosswalk/">Crosswalk</a></li><li><a class="tocitem" href="../examples/sidewalk/">Sidewalk</a></li></ul></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../Roadways/">Roadways</a></li><li><a class="tocitem" href="../actions/">Driving Actions</a></li><li><a class="tocitem" href="../states/">States</a></li><li><a class="tocitem" href="../agent_definitions/">Agent Definition</a></li><li><a class="tocitem" href="../behaviors/">Behaviors</a></li><li><a class="tocitem" href="../simulation/">Simulation</a></li><li><a class="tocitem" href="../collision_checkers/">Collision Checker</a></li><li class="is-active"><a class="tocitem" href>Feature Extraction</a><ul class="internal"><li><a class="tocitem" href="#Finding-neighbors-1"><span>Finding neighbors</span></a></li><li><a class="tocitem" href="#Lane-Features-1"><span>Lane Features</span></a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Feature Extraction</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Feature Extraction</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/sisl/AutomotiveDrivingModels.jl/blob/master/docs/src/feature_extraction.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Feature-Extraction-1"><a class="docs-heading-anchor" href="#Feature-Extraction-1">Feature Extraction</a><a class="docs-heading-anchor-permalink" href="#Feature-Extraction-1" title="Permalink"></a></h1><p>AutomotiveDrivingModels.jl implements a feature extraction pipeline to extract information from pre-recorded simulation  in a <code>QueueRecord</code> or <code>ListRecord</code>. (see Records.jl for info on the data structure)</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"></div></div><p>Work in progress, the feature extraction functionalities are being redesigned  Follow <a href="https://github.com/sisl/AutomotiveDrivingModels.jl/pull/72">#72</a> for more information PRs for documenting feature extraction are more than welcome</p><h2 id="Finding-neighbors-1"><a class="docs-heading-anchor" href="#Finding-neighbors-1">Finding neighbors</a><a class="docs-heading-anchor-permalink" href="#Finding-neighbors-1" title="Permalink"></a></h2><p>Finding neighbors of an entity is a common query and can be done using the <code>find_neighbor</code> function.  This function allows to find the neighbor of an entity within a scene using a forward search method.  The search algorithm moves longitudinally along a given lane and its successors (according to the given road topology).  Once it finds a car it stops searching and return the results as a <code>NeighborLongitudinalResult</code></p><article class="docstring"><header><a class="docstring-binding" id="AutomotiveDrivingModels.NeighborLongitudinalResult" href="#AutomotiveDrivingModels.NeighborLongitudinalResult"><code>AutomotiveDrivingModels.NeighborLongitudinalResult</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">NeighborLongitudinalResult</code></pre><p>A structure to retrieve information about a neihbor in the longitudinal direction i.e. rear and front neighbors on the same lane. If the neighbor index is equal to <code>nothing</code> it means there is no neighbor.</p><p><strong>Fields</strong></p><ul><li><code>ind::Union{Nothing, Int64}</code> index of the neighbor in the scene</li><li><code>Δs::Float64</code> positive distance along the lane between vehicles positions</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sisl/AutomotiveDrivingModels.jl/blob/bf47a45848d4e97d5a978819d6040fd586504dc3/src/feature-extraction/neighbors_features.jl#L1-L10">source</a></section></article><p>The <code>find_neighbor</code> function accepts different keyword argument to search front or rear neighbors, or neighbors on different lanes.</p><article class="docstring"><header><a class="docstring-binding" id="AutomotiveDrivingModels.find_neighbor" href="#AutomotiveDrivingModels.find_neighbor"><code>AutomotiveDrivingModels.find_neighbor</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">find_neighbor(scene::Frame, roadway::Roawday, ego::Entity; kwargs...)</code></pre><p>Search through lanes and road segments to find a neighbor of <code>ego</code> in the <code>scene</code>. </p><p><strong>Arguments</strong></p><ul><li><code>scene::Frame</code> the scene containing all the entities</li><li><code>roadway::Roadway</code> the road topology on which entities are driving </li><li><code>ego::Entity</code> the entity that we want to compute the neighbor of.</li></ul><p><strong>Keyword arguments</strong></p><ul><li><code>rear::Bool = false</code> set to true to search for rear neighbor, search forward neighbor by default </li><li><code>max_distance::Float64 = 250.0</code> stop searching after this distance is reached, if the neighbor is further than max_distance, returns nothing</li><li><code>targetpoint_ego::VehicleTargetPoint</code> the point on the ego vehicle used for distance calculation, see <code>VehicleTargetPoint</code> for more info</li><li><code>targetpoint_neighbor::VehicleTargetPoint</code> the point on the neighbor vehicle used for distance calculation, see <code>VehicleTargetPoint</code> for more info</li><li><code>ids_to_ignore::Union{Nothing, Set{I}} = nothing</code> a list of entity ids to ignore for the search, ego is always ignored.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sisl/AutomotiveDrivingModels.jl/blob/bf47a45848d4e97d5a978819d6040fd586504dc3/src/feature-extraction/neighbors_features.jl#L56-L74">source</a></section></article><p>When computing the distance to a neighbor, one might want to choose different reference points on the vehicle (center to center, bumper to bumper, etc...). AutomotiveDrivingModels provides the <code>VehicleTargetPoint</code> types to do so.  One can choose among three possible instances to use the front, center, or rear point of a vehicle to compute the distance to the neighbor.</p><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>VehicleTargetPoint,     VehicleTargetPointCenter,     VehicleTargetPointFront,     VehicleTargetPointRear</code>. Check Documenter&#39;s build log for details.</p></div></div><p>To get the relative position of two vehicles in the Frenet frame, the <code>get_frenet_relative_position</code> can be used.  It stores the result in a <code>FrenetRelativePosition</code> object.</p><article class="docstring"><header><a class="docstring-binding" id="AutomotiveDrivingModels.get_frenet_relative_position" href="#AutomotiveDrivingModels.get_frenet_relative_position"><code>AutomotiveDrivingModels.get_frenet_relative_position</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">get_frenet_relative_position(veh_fore::Entity, veh_rear::Entity, roadway::Roadway)</code></pre><p>return the Frenet relative position between the two vehicles. It projects the position of the first vehicle onto the lane of the second vehicle. The result is stored as a <code>FrenetRelativePosition</code>.</p><p>Lower level:     get<em>frenet</em>relative<em>position(posG::VecSE2{Float64}, roadind::RoadIndex, roadway::Roadway;         max</em>distance<em>fore::Float64 = 250.0, # max distance to search forward [m]         max</em>distance<em>rear::Float64 = 250.0, # max distance to search backward [m]         improvement</em>threshold::Float64 = 1e-4,     )</p><p>Project the given point to the same lane as the given RoadIndex. This will return the projection of the point, along with the Δs along the lane from the RoadIndex. The returned type is a <code>FrenetRelativePosition</code> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sisl/AutomotiveDrivingModels.jl/blob/bf47a45848d4e97d5a978819d6040fd586504dc3/src/feature-extraction/neighbors_features.jl#L201-L216">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="AutomotiveDrivingModels.FrenetRelativePosition" href="#AutomotiveDrivingModels.FrenetRelativePosition"><code>AutomotiveDrivingModels.FrenetRelativePosition</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">FrenetRelativePosition</code></pre><p>Contains information about the projection of a point on a lane. See <code>get_frenet_relative_position</code>.</p><p><strong>Fields</strong></p><ul><li><code>origin::RoadIndex</code> original roadindex used for the projection, contains the target lane ID.</li><li><code>target::RoadIndex</code> roadindex reached after projection</li><li><code>Δs::Float64</code> longitudinal distance to the original roadindex </li><li><code>t::Float64</code> lateral distance to the original roadindex in the frame of the target lane</li><li><code>ϕ::Float64</code> angle with the original roadindex in the frame of the target lane</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sisl/AutomotiveDrivingModels.jl/blob/bf47a45848d4e97d5a978819d6040fd586504dc3/src/feature-extraction/neighbors_features.jl#L181-L192">source</a></section></article><h2 id="Lane-Features-1"><a class="docs-heading-anchor" href="#Lane-Features-1">Lane Features</a><a class="docs-heading-anchor-permalink" href="#Lane-Features-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="AutomotiveDrivingModels.get_lane_width" href="#AutomotiveDrivingModels.get_lane_width"><code>AutomotiveDrivingModels.get_lane_width</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">get_lane_width(veh::Entity, roadway::Roadway)</code></pre><p>Returns the width of the lane where <code>veh</code> is.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sisl/AutomotiveDrivingModels.jl/blob/bf47a45848d4e97d5a978819d6040fd586504dc3/src/feature-extraction/lane_features.jl#L1-L4">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="AutomotiveDrivingModels.get_markerdist_left" href="#AutomotiveDrivingModels.get_markerdist_left"><code>AutomotiveDrivingModels.get_markerdist_left</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">get_markerdist_left(veh::Entity, roadway::Roadway)</code></pre><p>distance of <code>veh</code> to the left marker of the lane</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sisl/AutomotiveDrivingModels.jl/blob/bf47a45848d4e97d5a978819d6040fd586504dc3/src/feature-extraction/lane_features.jl#L18-L21">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="AutomotiveDrivingModels.get_markerdist_right" href="#AutomotiveDrivingModels.get_markerdist_right"><code>AutomotiveDrivingModels.get_markerdist_right</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">get_markerdist_left(veh::Entity, roadway::Roadway)</code></pre><p>distance of <code>veh</code> to the right marker of the lane</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sisl/AutomotiveDrivingModels.jl/blob/bf47a45848d4e97d5a978819d6040fd586504dc3/src/feature-extraction/lane_features.jl#L28-L31">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../collision_checkers/">« Collision Checker</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 18 March 2020 00:48">Wednesday 18 March 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
